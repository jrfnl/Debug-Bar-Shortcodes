jQuery(document).ready(function(){var dbsTable=jQuery("#debug-bar-shortcodes");dbsTable.find("span.spinner").css({"background-image":'url("'+i18n_db_shortcodes.spinner+'")'});dbsTable.on("mouseenter.dbs-action-links","td.column-title",function(){jQuery(this).find("div.row-actions").css({visibility:"visible"})}).on("mouseleave","td.column-title",function(){jQuery(this).find("div.row-actions").css({visibility:"hidden"})});dbsTable.on("click","a.debug-bar-shortcodes-view-details",function(event){event.preventDefault();var targetTr=jQuery(this).closest("tr").next("tr.debug-bar-shortcodes-details");if(jQuery(this).text()==i18n_db_shortcodes.view_details){targetTr.show();jQuery(this).text(i18n_db_shortcodes.hide_details)}else{targetTr.hide();jQuery(this).text(i18n_db_shortcodes.view_details)}});dbsTable.on("click","a.debug-bar-shortcodes-view-use",function(event){event.preventDefault();var targetTr=jQuery(this).closest("tr").next("tr");if(targetTr.hasClass("debug-bar-shortcodes-details")){targetTr=targetTr.next("tr")}if(targetTr.hasClass("debug-bar-shortcodes-uses")){if(jQuery(this).text()==i18n_db_shortcodes.view_use){targetTr.show();jQuery(this).text(i18n_db_shortcodes.hide_use)}else{targetTr.hide();jQuery(this).text(i18n_db_shortcodes.view_use)}}});dbsTable.on("click","a.debug-bar-shortcodes-get-details",function(event){event.preventDefault();var eventTarget=jQuery(this);var spinner=eventTarget.parent().find("span.spinner");spinner.show();var targetShortcode=this.hash.substring(1);jQuery.ajax({url:(ajaxurl)?ajaxurl:i18n_db_shortcodes.ajaxurl,type:"post",data:{action:"debug-bar-shortcodes-retrieve","dbs-nonce":i18n_db_shortcodes.nonce,shortcode:targetShortcode},success:function(response){if(response==="-1"){jQuery("a.debug-bar-shortcodes-get-details").remove();alert(i18n_db_shortcodes.illegal)}else{var resData=wpAjax.parseAjaxResponse(response,"ajax-response");if(!resData.responses||resData.responses.length<1){alert(i18n_db_shortcodes.php_error)}else{if(resData.responses[0].id!="1"||!resData.responses[0].data||resData.responses[0].data.length===0){eventTarget.replaceWith(i18n_db_shortcodes.no_details)}else{var nrOfColumns=(eventTarget.closest("tr").find("td").length-1);resData=resData.responses[0];resData=resData.data;resData=resData.replace(/\{colspan\}/g,nrOfColumns);if(eventTarget.closest("tr").hasClass("even")){resData=jQuery(resData).addClass("even")}eventTarget.closest("tr").after(resData);eventTarget.text(i18n_db_shortcodes.view_details).removeClass("debug-bar-shortcodes-get-details").addClass("debug-bar-shortcodes-view-details").click()}}}spinner.hide()},error:function(){spinner.hide();alert(i18n_db_shortcodes.failed)}})});dbsTable.on("click","a.debug-bar-shortcodes-find",function(event){event.preventDefault();var eventTarget=jQuery(this);var spinner=eventTarget.parent().find("span.spinner");spinner.show();var targetShortcode=this.hash.substring(1);jQuery.ajax({url:(ajaxurl)?ajaxurl:i18n_db_shortcodes.ajaxurl,type:"post",data:{action:"debug-bar-shortcodes-find","dbs-nonce":i18n_db_shortcodes.nonce,shortcode:targetShortcode},success:function(response){if(response==="-1"){jQuery("a.debug-bar-shortcodes-find").remove();alert(i18n_db_shortcodes.illegal)}else{var resData=wpAjax.parseAjaxResponse(response,"ajax-response");if(!resData.responses||resData.responses.length<1){alert(i18n_db_shortcodes.php_error)}else{if(resData.responses[0].id!="1"||!resData.responses[0].data||resData.responses[0].data.length===0){eventTarget.replaceWith(i18n_db_shortcodes.not_in_use)}else{var nrOfColumns=(eventTarget.closest("tr").find("td").length-1);resData=resData.responses[0];resData=resData.data;resData=resData.replace(/\{colspan\}/g,nrOfColumns);var nextTr=eventTarget.closest("tr").next("tr");if(nextTr.hasClass("debug-bar-shortcodes-details")){nextTr=nextTr.next("tr")}if(eventTarget.closest("tr").hasClass("even")){resData=jQuery(resData).addClass("even")}nextTr.before(resData);eventTarget.text(i18n_db_shortcodes.hide_use).removeClass("debug-bar-shortcodes-find").addClass("debug-bar-shortcodes-view-use")}}}spinner.hide()},error:function(){spinner.hide();alert(i18n_db_shortcodes.failed)}})})});